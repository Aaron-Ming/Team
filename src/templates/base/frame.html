<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}{% endblock %}</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/front/reset.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/front/main.css') }}">
    <link href="{{ url_for('static', filename='img/favicon.ico') }}" rel="icon" type="image/x-icon" />
    <link href="{{ url_for('static', filename='img/favicon.ico') }}" rel="shortcut icon" type="image/x-icon" />
    <script src="{{ url_for('static', filename='js/jquery-3.1.0.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/nav.js') }}" type="text/javascript"></script>
    {% block head %}{% endblock %}
</head>
<body>
    <!-- nav start -->
    <div id="header">
        <div class="logo" ><a href="{{ url_for('index') }}"><img src="{{ url_for('static', filename='img/saint_logo.png') }}" alt="SaintIC Logo" title="SaintIC Team"></a></div>
        <div class="menu">
            <ul>
                <li><a href="{{ url_for('index') }}">Index<span>回归主页</span></a></li>
                <li><a href="#">CataLog<span>分类目录</span></a>
                    <ul id="catalog">
                    </ul>
                </li>
                <li><a href="#">Sources<span>文章类型</span></a>
                    <ul id="sources">
                    </ul>
                </li>
                <li><a href="#">Function<span>额外功能</span></a>
                    <ul>
                        {% if g.signin -%}
                            <li><a href="{{ url_for('logout') }}">Logout<span>注销</span></a></li>
                        {% else -%}
                            <li><a href="{{ url_for('login') }}">Login<span>登录</span></a></li>
                        {% endif -%}
                        <li><a href="{{ url_for('blogCreate') }}">Write<span>写文章</span></a></li>
                        <li><a href="https://github.com/saintic/Team/tree/front" target="_blank">GitHub<span>开源地址</span></a></li>
                        <li><a href="#">Team<span>团队介绍</span></a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <!--nav end -->
    {% block body %}{% endblock %}
    {% block script %}{% endblock %}
    <script>
            $.ajax({
                url: "https://api.saintic.com/blog?catalog=true",
                method: 'GET',
                datatype: 'json',
                success: function(res) {
                    console.log(res);
                    var data= res.data;
                    var str = '';
                    for(i=0; i<data.length; i++) {
                        catalog = data[i];
                        str += '<li><a href="#">' + catalog + '</a></li>';
                    };
                    document.getElementById('catalog').innerHTML=str;
                },
                error: function(error){
                    console.log(error);
                    location.reload(true);
                }
            });
            $.ajax({
                url: "https://api.saintic.com/blog?sources=true",
                method: 'GET',
                datatype: 'json',
                success: function(res) {
                    console.log(res);
                    var data= res.data;
                    var str = '';
                    for(i=0; i<data.length; i++) {
                        sources = data[i];
                        str += '<li><a href="#">' + sources + '</a></li>';
                    };
                    document.getElementById('sources').innerHTML=str;
                },
                error: function(error){
                    console.log(error);
                    location.reload(true);
                }
            });
    </script>
</body>
</html>
